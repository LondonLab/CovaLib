import sys,os,math
import numpy as np
sys.path.append("/home/labs/londonir/dinad/CovaLib")
from Code import *

def generate_score_for_lig(pose):
    sp = pose.split()
    score = int(sp[8]) + 0.5*int(sp[5])- int(sp[7])
    if float(sp[4]) < -1 or flost(sp[5])> 0: score = -10
    scored = pose.strip() + ' ' + str(score) + '\n'
    return scored
    
def main(name, argv):
    if (len(argv) != 1):
        print_usage(name)
        return
    PDB_list = open(os.getcwd()+'/'+argv[0],'r').readlines()  
    for i in [1]: #range(len(PDB_list)):
        PDBid = '4TNS' #PDB_list[i].split()[0]
        print PDBid
        Lig_score = open(os.getcwd()+'/'+PDBid+'/'+PDBid+'_ligand_score.txt','r').readlines()
        outfile_local = open(os.getcwd()+'/'+PDBid+'/'+PDBid+'_ligand_sort.txt','a')
        outfile_mol2 = open(os.getcwd()+'/'+PDBid+'/'+PDBid+'_sorted_poses.mol2','a')
        mol2_path = '/home/labs/londonir/dinad/Pin1/docking/try/'+PDBid+'/run.alk_hal.frag/poses.mol2'
        poses_f = Poses_parser.Poses_parser(path)
        for pose in Lig_score:
            outfile_local.write(generate_score_for_lig(pose))
#        outfile_local.close()
#        outfile_local = open(os.getcwd()+'/'+PDBid+'/'+PDBid+'_ligand_sort.txt','r')
#        sort_list_by_scores()
#        create_sorted_mol2()

def print_usage(name):
    print "Usage : " + name + " <PDB_list_file>"


if __name__ == "__main__":
    main(sys.argv[0], sys.argv[1:])

